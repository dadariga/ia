<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marker with Video</title>
    <link rel="stylesheet" href="css/experimental.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>


<style>
  .arjs-loader {
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .arjs-loader div {
    text-align: center;
    font-size: 1.25em;
    color: white;
  }
  .a-scene{
    height: 100%;
    top: 10%;
  }
</style>
<script>
  AFRAME.registerComponent("videohandler", {
    init: function(){
      var marker = this.el;
      this.vid= document.querySelector("#vid");

      marker.addEventListener("markerFound",
      function(){
        this.toggle = true;
        this.vid.play();
      }
      .bind(this));
    

    marker.addEventListener("markerLost",
    function(){
      this.toggle=false;
      this.vid.pause();

    }.bind(this));
    }
    
  })
</script>
</head>
<body>
  <!-- minimal loader shown until image descriptors are loaded -->
  <!--<div class="arjs-loader">
    <div>Loading, please wait...</div>
  </div>-->
  <a-scene embedded arjs renderer="antialias: false; logarithmicDepthBuffer: true" class="ascene">
    <canvas id="canvasExample"> 
      

    </canvas>
    <a-assets>
      <video id="vid" src="../Videos/DavisDivan.mp4" preload="auto" 
      loop crossorigin webkit-playsinline autoplay muted playsinline></video>
    </a-assets>
        <a-marker preset="pattern" type='pattern' url='https://raw.githubusercontent.com/dadariga/ia/master/pattern/pattern-Download.patt'>
          <a-entity obj-model="obj: #r2d2-obj; mtl: #r2d2-mtl" position="0 0 0" scale="0.005 0.005 0.005"></a-entity> <!--rotation="-90 0 -90"-->
        </a-marker>
        <a-marker preset="pattern" type='pattern' videohandler smooth="true"smoothcount="10"smoothTolerance="0.01"smoothThreshold="5" raycaster="objects: .clickable" emitevents="true" cursor="fuse: false,rayOrigin: mouse;"   url='https://raw.githubusercontent.com/fermiumsunset/dump/main/pattern-markerAuto.patt'>
          <a-video
          src="#vid"
            position="0 0 0"
            scale="5 5 5"
            rotation="0 0 0"
            class="clickable"
            >
          </a-video>
        </a-marker>
        <a-marker preset="pattern" type='pattern' url='https://raw.githubusercontent.com/fermiumsunset/dump/main/patternBrille.patt'>
          <a-entity obj-model="obj: #divan-obj; mtl: #divan-mtl" position="0 0 -3" scale="0.0003 0.0003 0.0003"></a-entity>
        </a-marker>
        <a-entity camera></a-entity>
</a-scene>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
</body>
</html>